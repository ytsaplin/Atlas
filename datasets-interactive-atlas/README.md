## The Interactive Atlas Dataset

The Interactive Atlas Dataset comprises gridded information from a set of [25 variables and impact-relevant indices](https://interactive-atlas.ipcc.ch/regional-information/about#variables) used in the [Interactive Atlas](http://interactive-atlas.ipcc.ch), computed from CMIP5/6 and CORDEX data (historical and scenario simulations) with monthly temporal resolution and interpolated to common [reference grids](/reference-grids) (including postprocessing –e.g. bias adjustment– when needed).

The resulting dataset is being archived by [IPCC-DDC](https://www.ipcc-data.org) as part of the available data for the AR6 (estimated publication date: May 2022). The metadata and scripts for reproducibily are included in this repository. A subset with information spatially aggregated over the IPCC [reference regions](/reference-regions) is avaialable in the section [datasets-aggregated-regionally](/datasets-aggregated-regionally) of this repository and is used to reproduce some of the figures of the Atlas chapter (see [notebooks](/notebooks) section). 


## Code for reproducibility of the Interactive Atlas Dataset

This repository contains the code needed to generate the intermediate dataset (Interactive Atlas Dataset) used to generate the different products displayed in the Interactive Atlas. The code takes as input the CMIP5/6 and CORDEX information described in the [data sources](/data-sources) section. For simplicity, the full workflow is split up in four main scripts which undertake independent tasks. In a nutshell:

* `01_index_calculation.R` computes a number of climate indices (see the table included in the own script) from CMIP5 (and/or CMIP6) model outputs. Due to the particularities of some of the indices available, two more companion scripts are also delivered: `01_index_calculation_SPI.R` and `01_index_calculation_bias_corrected.R`. Whereas the former is thought for SPI-6, the latter is used for those indices which are based on absolute thresholds (Frost Days, TX35 and TX40).
* `02_interpolation.R` interpolates the outputs (NetCDF files) produced by `01_index_calculation.R` using Conservative Remapping (the approach used in EURO-CORDEX for CORDEX data). The folder called *bash-interpolation-scripts* contains some bash scripts which are required by `02_interpolation.R`.
* `03_ensemble_building.R` creates a multi-model ensemble building on the interpolated information generated by `02_interpolation.R`, returning NcML files.
* `04_map_figures.R` generates the final figures (maps) from the NcMLs returned by `03_ensemble_building.R`.

Al these scripts build on the [climate4R framework](https://github.com/SantanderMetGroup/climate4R) ([Iturbide et al. 2019](https://doi.org/10.1016/j.envsoft.2018.09.009)). 

## Script list

 * [01_index_calculation_bias_corrected.R](./01_index_calculation_bias_corrected.R)
 * [01_index_calculation.R](./01_index_calculation.R)
 * [01_index_calculation_SPI.R](./01_index_calculation_SPI.R)
 * [02_interpolation.R](./02_interpolation.R)
 * [03_ensemble_building.R](./03_ensemble_building.R)
 * [04_map_figures.R](./04_map_figures.R)
 * [bias-correction](bias-correction) / [bias_correction_isimip3.R](./bias-correction/bias_correction_isimip3.R)
 * [hatching-functions](hatching-functions) / [hatching-functions.R](./hatching-functions/hatching-functions.R)
 * [bash-interpolation-scripts](bash-interpolation-scripts) / [AtlasCDOremappeR_CMIP6_Omon.sh](./bash-interpolation-scripts/AtlasCDOremappeR_CMIP6_Omon.sh)
 * [bash-interpolation-scripts](bash-interpolation-scripts) / [AtlasCDOremappeR_CMIP.sh](./bash-interpolation-scripts/AtlasCDOremappeR_CMIP.sh)
 * [bash-interpolation-scripts](bash-interpolation-scripts) / [AtlasCDOremappeR_CORDEX](./bash-interpolation-scripts/AtlasCDOremappeR_CORDEX) / [AtlasCDOremappeR_CORDEX.sh](./bash-interpolation-scripts/AtlasCDOremappeR_CORDEX/AtlasCDOremappeR_CORDEX.sh)
 * [bash-interpolation-scripts](bash-interpolation-scripts) / [AtlasCDOremappeR_CORDEX](./bash-interpolation-scripts/AtlasCDOremappeR_CORDEX) / [grid_bounds_calc.py](./bash-interpolation-scripts/AtlasCDOremappeR_CORDEX/grid_bounds_calc.py)
